# 测试用例管理搜索功能

## 功能概述

为测试用例管理系统添加了强大的搜索和筛选功能，帮助用户快速找到需要的测试用例。

## 新增功能

### 1. 搜索框（按名称/描述搜索）
- **位置**: 测试用例管理面板，工具栏下方
- **功能**: 实时搜索测试用例的名称和描述
- **使用方法**:
  - 在搜索框中输入关键词
  - 自动过滤显示匹配的测试用例
  - 点击 ✕ 按钮快速清除搜索

### 2. 标签筛选
- **位置**: 搜索框右侧
- **功能**: 根据标签筛选测试用例
- **使用方法**:
  - 输入一个或多个标签（用逗号分隔）
  - 系统会显示包含任意一个标签的测试用例
  - 支持模糊匹配（例如：输入 "per" 可以匹配 "per-url-config"）
  - 点击 ✕ 按钮快速清除标签筛选

### 3. 组合搜索
- **功能**: 可以同时使用搜索和标签筛选
- **逻辑**: 只显示同时满足搜索关键词和标签条件的测试用例

### 4. 重置筛选按钮
- **功能**: 一键清除所有筛选条件，显示全部测试用例

## 用户界面

### 搜索工具栏布局
```
┌─────────────────────────────────────────────────────────────────┐
│ 🔍 搜索用例名称、描述... [✕]  🏷️ 标签筛选 (逗号分隔) [✕]  [🔄 重置] │
└─────────────────────────────────────────────────────────────────┘
```

### 特性
- **响应式设计**: 搜索框自动适应容器宽度
- **即时反馈**: 输入时实时更新结果
- **清除按钮**: 仅在有内容时显示，避免界面混乱
- **空状态提示**: 无匹配结果时显示友好提示

## 技术实现

### 前端功能
- **文件**: `public/index.html`
- **核心函数**:
  - `filterTestCases()`: 主筛选函数，支持名称/描述搜索和标签筛选
  - `clearSearch()`: 清除搜索关键词
  - `clearTagFilter()`: 清除标签筛选
  - `resetFilters()`: 重置所有筛选条件
  - `renderCases(filteredCases)`: 增强的渲染函数，支持显示筛选结果

### 后端 API（已存在）
后端已经支持搜索功能，前端新增的功能充分利用了这些 API：

- `GET /api/testcases?search=关键词`: 按名称/描述搜索
- `GET /api/testcases?tags=标签1,标签2`: 按标签筛选
- `GET /api/testcases?search=关键词&tags=标签`: 组合搜索

## 使用示例

### 示例 1: 搜索包含"初始化"的测试用例
1. 在搜索框中输入 "初始化"
2. 系统自动显示所有名称或描述中包含"初始化"的测试用例

### 示例 2: 筛选带有特定标签的测试用例
1. 在标签筛选框中输入 "test"
2. 系统显示所有包含 "test" 标签的测试用例

### 示例 3: 组合搜索
1. 在搜索框中输入 "内存"
2. 在标签筛选框中输入 "per-url-config"
3. 系统显示同时满足两个条件的测试用例

## 测试

### API 测试
```bash
# 测试搜索功能
curl "http://localhost:3001/api/testcases?search=初始化"

# 测试标签筛选
curl "http://localhost:3001/api/testcases?tags=test"

# 测试组合搜索
curl "http://localhost:3001/api/testcases?search=测试&tags=test,per-url-config"
```

### 前端测试
1. 打开 `http://localhost:3001`
2. 在搜索框中输入不同的关键词
3. 在标签筛选框中输入标签
4. 验证结果是否正确
5. 测试清除和重置按钮

也可以使用提供的测试页面：`http://localhost:3001/test-search.html`

## 性能优化

- **客户端筛选**: 前端直接对已加载的测试用例进行筛选，无需重新请求后端
- **即时响应**: 使用 `oninput` 事件实时更新结果
- **轻量级实现**: 不依赖额外的第三方库

## 未来增强

可能的改进方向：
- 添加高级筛选选项（测试类型、执行模式等）
- 支持正则表达式搜索
- 保存常用搜索条件
- 搜索历史记录
- 导出筛选结果

## 兼容性

- 完全向后兼容现有功能
- 不影响现有的测试用例数据结构
- 适配所有主流浏览器
